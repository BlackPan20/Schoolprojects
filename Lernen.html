<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="title">Lernen</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<style>

    *{
        background-color: white;
        color: black;
    }
    body {
        display: flex;
            flex-direction: column;
            align-items: center;
            
            
            margin: 0;
        }
    nav{
        background-color: white;
            color: black;
           
            display: flex;
            justify-content: center; 
            gap: 10px; /* Abstand zwischen den Buttons */
           
    }
    button{
        border-radius: 10px;
    }
    button:hover{
        color: blue;
        font-size: x-large;
    }
</style>
<body>
    <div class="nav">
        <button onclick="datasArray()">Fülle mit ...</button>
        <button onclick="createCanva()">ZickZack</button>
        <button onclick="randomNum()">Zufallszaheln</button>
        <button onclick="aadition()">Addieren</button>
        <button onclick="summFromTo()">Summe von bis</button>
        <button onclick="switchNum()">Inhalt tauschen</button>
        <button onclick="clearArray()">Clear</button>
        <button onclick="clearLastEntry()">Letzte Zahl löschen</button>
        <button onclick="clearFirstNum()">Vorderste Zahl löschen</button>
        <button onclick="randomFact()">Random Fact</button>
        <button onclick="postPap()">Brief schreiben</button>
        <button onclick="timer()">Timer</button>
        <button onclick="msToSek()">Sek zu ms Umrechner</button>
        <button onclick="tellName()">Wie heißt du?</button>

    </div>
   
    <p id="liste"></p>
    <div class="item"></div>
    <canvas id="myChart" width="400" height="200"></canvas>
</body>
<script>
const buchstabenArray = [];
let myChartInstance; // Declare a variable to store the chart instance
function tellName(){
    
    var name = prompt("Wie heißt du?")
    document.getElementById("title").innerHTML = name
    alert("Der Titel der Seite ist jetzt " + name )
}
function switchNum(){
    let min = parseInt(prompt("Welchen Inhalt möchten Sie tauschen? Geben Sie die Nummer ein (Index beginnt bei 1):")) - 1;
    let max = parseInt(prompt("Welchen anderen Inhalt möchten Sie tauschen? Geben Sie die Nummer ein (Index beginnt bei 1):")) - 1;

    if (min >= 0 && max >= 0 && min < buchstabenArray.length && max < buchstabenArray.length) {
        // Tausch der Elemente
        let temp = buchstabenArray[min];
        buchstabenArray[min] = buchstabenArray[max];
        buchstabenArray[max] = temp;

        // Aktualisieren der Anzeige
        document.getElementById("liste").innerHTML = buchstabenArray.join(", ");
        alert("Der neue Array ist: " + buchstabenArray.join(", "));
    } else {
        alert("Falsche Eingabe! Bitte versuchen Sie es erneut.");
    }
}



function errore(){
    alert("Irgendwas ist schief gegangen!")
}


function summFromTo() {
    let min = parseInt(prompt("Bitte geben Sie die niedrigste Nummer ein (Index beginnt bei 1):")) - 1;
    let max = parseInt(prompt("Bitte geben Sie die höchste Nummer ein (Index beginnt bei 1):")) - 1;

    if (min > max || min < 0 || max >= buchstabenArray.length) {
        errore();
        return;
    }

    let sum = 0;
    for (let i = min; i <= max; i++) {
        sum += buchstabenArray[i];
    }

    alert("Die Summe der Werte von Index " + (min + 1) + " bis " + (max + 1) + " ist " + sum);
}

function datasArray(){
    let text = prompt("Geben Sie eine Liste von Zahlen ein, getrennt durch Kommas (z.B. 1,2,3,4):");
    
    if (text) {
        
        buchstabenArray.length = 0; 

        
        buchstabenArray.push(...text.split(",").map(Number));

        
        document.getElementById("liste").innerHTML = buchstabenArray.join(", ");
    } else {
        alert("Bitte geben Sie gültige Zahlen ein.");
    }
}


function createCanva(){



    
    document.body.style.backgroundColor = "white";
    document.body.style.Color = "black";
    const ctx = document.getElementById('myChart').getContext('2d');
    
    if (buchstabenArray.length === 0) {
        alert("Das Array ist leer! Bitte zuerst Zahlen eingeben.");
        return;
    }

    const labels = buchstabenArray.map((_, index) => index + 1); 

    myChartInstance = new Chart(ctx, {
        type: 'line', // Diagrammtyp
        data: {
            labels: labels,
            datasets: [{
                label: 'Eingegebene Daten',
                data: buchstabenArray,  
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
    
}


function randomNum(){
    //const numArray = []

    buchstabenArray.length = 0
    for(let i = 0; i<30; i++){

        const randomInt = Math.floor(Math.random() * 100);
        buchstabenArray.push(randomInt)
        
    }
    alert(buchstabenArray)
    document.getElementById("liste").innerHTML = buchstabenArray.join(", ")
    
    


}

function aadition(){
    let userInOne = prompt("Welche Nummer aus dem Array möchten Sie addieren? (Geben Sie den Index an, beginnend bei 1)");
    let userInTo = prompt("Welche andere Nummer aus dem Array möchten Sie addieren? (Geben Sie den Index an, beginnend bei 1)");

    
    let us1 = parseInt(userInOne) - 1;
    let us2 = parseInt(userInTo) - 1;

    
    if (us1 >= 0 && us1 < buchstabenArray.length && us2 >= 0 && us2 < buchstabenArray.length) {
        let erg = buchstabenArray[us1] + buchstabenArray[us2];
        alert("Das Ergebnis ist " + erg);
    } else {
        alert("Ungültige Indizes! Bitte versuchen Sie es erneut.");
    }
}




function clearArray() {
    buchstabenArray.length = 0;
    document.getElementById("liste").innerHTML = buchstabenArray;

    if (myChartInstance) {
        myChartInstance.data.labels = []; // Clear labels
        myChartInstance.data.datasets.forEach(dataset => {
            dataset.data = []; // Clear data points
        });
        myChartInstance.update(); // Update the chart
    }
}


function clearLastEntry(){
    
    testLast()
    buchstabenArray.pop()
    
    document.getElementById("liste").innerHTML = buchstabenArray.join(", ")
    lastNum()
}
function clearFirstNum(){
    
    testLast();
   
    buchstabenArray.shift()
    document.getElementById("liste").innerHTML = buchstabenArray.join(", ")
    lastNum();
}

function lastNum(){
    if(buchstabenArray > 1){
        alert("Sie haben jetzt alle Zahlen im Array gelöscht,bis auf eine.")
    }
}
function testLast(){
    if(buchstabenArray == 0){
        errore();
    }
}

function randomFact(){

    buchstabenArray.length = 0;
  document.getElementById("liste").innerHTML = buchstabenArray

   
const apiUrl = 'https://uselessfacts.jsph.pl/api/v2/facts/random';


fetch(apiUrl)
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(data => {
    console.log(data.text);
    document.getElementById("liste").innerHTML = data.text
  })
  .catch(error => {
    console.error('Error:', error);
  });

  
  
}

function postPap(){
    var userAnswer = prompt("Sie möchten einen Brief schreiben, ist das Korrekt?")
    if(userAnswer == "ja" || userAnswer == "Ja" || userAnswer == "JA" ){
        alert("Ok weiter gehts")
        chapOne()
    }
    else{
        alert("OK, dann villeicht wann anders!")
    }

}
function chapOne(){
    var listItem = document.createElement('div');
    listItem.classList.add('item');
    
    // HTML-Inhalt des neuen Elements
    listItem.innerHTML = `
      <p>Dies ist ein neuer Brief:</p>
      <textarea id="poste" placeholder="Gib deinen Text hier ein..."></textarea><br>
      <button class="title-rDZ" onclick="sendPost(this)">Absenden</button>
    `;

    // Füge das neue Element in den DOM ein
    document.body.appendChild(listItem);
}

function sendPost(element) {
    var text = document.getElementById("poste").value;
    var words = text.split(/\s+ /);
  
    element.parentElement.remove();
   
    alert(words)
}

async function timer(){
    var userAnswer = prompt("Wie lange soll der Timer gehen bitte in ms angeben!")

    alert("Warte auf " + userAnswer + " ms")
    await count(userAnswer);
    alert("Zeit ist rum")
}

function count(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
        
    
}

function msToSek(){
    var use1 = prompt("Bitte geben sie ein Wie viel Sekunden sie in ms Umwandeln wollen")
    let ergebnis = use1 * 1000
    alert(ergebnis + " ist das Ergebnis und wird jetzt in die Zwischenablage kopiert")
    inZwischenablageKopieren(ergebnis);
    function inZwischenablageKopieren(text) {
    // Prüfen, ob die Clipboard API unterstützt wird
    if (navigator.clipboard) {
        navigator.clipboard.writeText(text)
            .then(() => {
                console.log("Text erfolgreich in die Zwischenablage kopiert!");
            })
            .catch(err => {
                console.error("Fehler beim Kopieren in die Zwischenablage: ", err);
            });
    } else {
        console.warn("Die Clipboard API wird nicht unterstützt.");
    }
}



}







</script>
</html>
